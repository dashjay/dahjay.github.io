<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.101.0" />


<title>使用modelsim_ase &#43; flask实现了一个测评沙箱 - Dashjay&#39;s</title>
<meta property="og:title" content="使用modelsim_ase &#43; flask实现了一个测评沙箱 - Dashjay&#39;s">




  






<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">







</head>

<body>
  <div class="wrapper">
    <header class="header">
      <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/%3cnil%3e"
         width=""
         height=""
         alt="">
  </a>

  <ul class="nav-links">
    
    <li><a href="/">Home</a></li>
    
    <li><a href="https://learncppcn.github.io/">LearnCPP中文翻译</a></li>
    
    <li><a href="/cv">CV</a></li>
    
    <li><a href="/daily">我在做什么？</a></li>
    
    <li><a href="/open_source">Contribution</a></li>
    
  </ul>
</nav>

    </header>

<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">1 min read</span>
    


    <h1 class="article-title">使用modelsim_ase &#43; flask实现了一个测评沙箱</h1>

    
    <span class="article-date">2019-09-02</span>
    

    
    <div id="tags" >
      
        <a class="article-tag" href="/tags/verilog">verilog</a> 
      
        <a class="article-tag" href="/tags/oj">OJ</a> 
      
    </div>
    

    

    <div class="article-content">
      <p>二话不说先甩上Github连接

<a href="https://github.com/dashjay/Verilog-Judge-USTB" target="_blank" rel="noopener">Verilog-Judge-USTB</a>
</p>

<h2 id="verilog-judge-ustb">Verilog-Judge-USTB <a href="#verilog-judge-ustb">¶</a></h2>
<p>来自北京科技大学某小组的一个verilog的评测沙箱，基于Flask编写</p>
<p>A verilog online judger from USTB, based on Flask-python</p>

<h2 id="usage">Usage <a href="#usage">¶</a></h2>
<p><strong>构建</strong>(build)</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/dashjay/Verilog-Judge-USTB.git
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> Verilog-Judge-USTB
</span></span><span style="display:flex;"><span>docker build . -t verilog-judge
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>运行</strong>(run)</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run verilog-judge -v ./modelsim_ase:/root/modelsim_ase -p 33778:5000
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>内部指定的modelsim_ase来自FPGA微软的免费软件 <strong>Quartus Lite 中的modelsim组件</strong>
docker内部运行的端口是5000，开在外部</p>
</blockquote>
<p><strong>测试</strong>(test)</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x test.sh
</span></span><span style="display:flex;"><span>python test.py | python -m json.tool
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p>以下是测试输出</p>
</blockquote>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&#34;cmpcode&#34;</span>: <span style="color:#ff0;font-weight:bold">1</span>,
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&#34;cmpresult&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;Start time: 07:46:33 on Sep 02,2019\nvlog top_module.v \nModel Technology ModelSim - Intel FPGA Edition vlog 10.5b Compiler 2016.10 Oct  5 2016\n-- Compiling module top_module\n\nTop level modules:\n\ttop_module\nEnd time: 07:46:34 on Sep 02,2019, Elapsed time: 0:00:01\nErrors: 0, Warnings: 0\n&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&#34;signal&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;{\&#34;signal\&#34;:[{\&#34;name\&#34;:\&#34;a\&#34;,\&#34;wave\&#34;:\&#34;==========\&#34;,\&#34;data\&#34;:[\&#34;/top_module/i\&#34;,\&#34;8\&#34;,\&#34;8\&#34;,\&#34;8\&#34;,\&#34;8\&#34;,\&#34;8\&#34;]},{\&#34;name\&#34;:\&#34;b\&#34;,\&#34;wave\&#34;:\&#34;==========\&#34;,\&#34;data\&#34;:[\&#34;a\&#34;,\&#34;a\&#34;,\&#34;2\&#34;,\&#34;3\&#34;,\&#34;4\&#34;]},{\&#34;name\&#34;:\&#34;p\&#34;,\&#34;wave\&#34;:\&#34;==========\&#34;,\&#34;data\&#34;:[\&#34;xx\&#34;,\&#34;50\&#34;,\&#34;10\&#34;,\&#34;18\&#34;,\&#34;20\&#34;]}]}\n&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&#34;status&#34;</span>: <span style="color:#ff0;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>参数表</p>
<table>
<thead>
<tr>
<th>参数(parameter)</th>
<th>值(value)</th>
</tr>
</thead>
<tbody>
<tr>
<td>top_module</td>
<td>top_module.v字符串形式传送</td>
</tr>
<tr>
<td>stim</td>
<td>stim.v 激励文件字符串形式传送</td>
</tr>
</tbody>
</table>

<h3 id="thanks">thanks <a href="#thanks">¶</a></h3>
<p>
<a href="https://github.com/orgs/806Cypher/people/Explainaur" target="_blank" rel="noopener">Explainaur</a>
 编写了复杂的shell脚本</p>
<p>
<a href="https://github.com/dashjay" target="_blank" rel="noopener">dashjay</a>
写了Web服务进行测试了一下</p>
<blockquote>
<p>看下另一篇文章
<a href="/post/2019/07/27/modelsim-commandtools/">使用Modelsim中的CommandTools 进行仿真</a>
可以了解其背后的工作原理</p>
</blockquote>

    </div>


  </article>


  


  <footer class="footer">
  <ul class="footer-links">
    <li>
      <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
    </li>
    <li>
      <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png"
          alt="Img link to Hugo website" width="22" height="22"></a>
    </li>
  </ul>
</footer>

</div>

<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>



</body>

</html>

  
</main>